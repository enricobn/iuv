package {{nameSpace}}
{{#imports}}
import {{.}}
{{/imports}}

class {{className}}<MESSAGE> : org.iuv.core.HTML<MESSAGE>("{{name}}")
 {{#attributes.groups}},{{className}}<MESSAGE>{{/attributes.groups}}
 {{#groups}},{{fullClassName}}<MESSAGE>{{/groups}}
 {
    {{#attributes.attributes}}
    var {{name}}: {{type.className}}?
        set(value) {
            if (value == null) {
                removeProperty("{{originalName}}")
            } else {
                addProperty("{{originalName}}", value{{type.value}})
            }
        }
        get() = {{type.valueOf}}(getProperty("{{originalName}}"))

    {{/attributes.attributes}}

    {{#children}}
    fun {{name}}(init: {{className}}<MESSAGE>.() -> Unit) {
        element({{className}}(), init)
    }
    {{/children}}

    {{#attributes.functions}}
    fun {{name}}(handler: ({{eventType}},String) -> MESSAGE) {
        on("{{eventName}}") { event: {{eventType}} ->
            handler(event, event.target?.asDynamic().value as String)
        }
    }
    fun {{name}}(message: MESSAGE) {
        on("{{eventName}}") { _: {{eventType}} -> message }
    }

    {{/attributes.functions}}
}